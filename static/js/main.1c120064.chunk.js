(this["webpackJsonpsupa-secret"]=this["webpackJsonpsupa-secret"]||[]).push([[0],[,,,,,,,,,function(e,t,n){e.exports=n(22)},,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),u=(n(14),n(6)),i=n(2),l=n.n(i),s=n(4),m=n(1),d={id:"ID",name:"Name",city:"City",totalIncome:"Total income",averageIncome:"Average income",lastMonthIncome:"Last month income"},f=(n(16),function(e){var t=e.handleSorting,n=e.objectKey,c=e.defaultSort,o=void 0!==c&&c,u=Object(a.useState)(o),i=Object(m.a)(u,2),l=i[0],s=i[1];return r.a.createElement("th",null,r.a.createElement("button",{className:"btn btn__table--head",onClick:function(){var e=!l;s(e),t(n,e)}},d[n]))}),v=(n(17),function(e){var t=e.data,n=e.handleSorting;return r.a.createElement("div",{className:"mainTable-container"},r.a.createElement("table",{className:"mainTable"},r.a.createElement("thead",null,r.a.createElement("tr",null,Object.keys(d).map((function(e,t){return r.a.createElement(f,{handleSorting:n,objectKey:e,key:e,defaultSort:"id"===e})})))),r.a.createElement("tbody",null,t.map((function(e,t){var n=e.id,a=e.name,c=e.city,o=e.totalIncome,u=e.averageIncome,i=e.lastMonthIncome,l=d.id,s=d.name,m=d.city,f=d.totalIncome,v=d.averageIncome,b=d.lastMonthIncome;return r.a.createElement("tr",{key:t},r.a.createElement("td",{"data-label":l},n),r.a.createElement("td",{"data-label":s},a),r.a.createElement("td",{"data-label":m},c),r.a.createElement("td",{"data-label":f},o),r.a.createElement("td",{"data-label":v},u),r.a.createElement("td",{"data-label":b},i))})))))});n(18);var b=function(e){var t=e.handleSearch,n=Object(a.useState)(""),c=Object(m.a)(n,2),o=c[0],u=c[1];return r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{className:"input-search",type:"text",placeholder:"Search",value:o,onChange:function(e){u(e.target.value),t(e.target.value)}}))};n(19);var h=function(e){var t=e.handlePageChange,n=e.currentPage,a=e.lastPage,c=1===n,o=n===a;return r.a.createElement("div",{className:"pagination-container"},r.a.createElement("button",{onClick:function(){return t(-1)},className:"btn btn-previous",disabled:c},"PREVIOUS"),r.a.createElement("p",{className:"page-indicator"},n,"/",a),r.a.createElement("button",{onClick:function(){return t(1)},className:"btn btn-next",disabled:o},"NEXT"))};n(20);var g=function(e){var t=e.handleSorting,n=Object(a.useState)("id 1"),c=Object(m.a)(n,2),o=c[0],u=c[1];return r.a.createElement("div",{className:"mobile-sort"},r.a.createElement("label",{htmlFor:"sorting"},"Sort by: "),r.a.createElement("select",{name:"sorting",onChange:function(e){u(e.target.value);var n=e.target.value.split(" ")[0],a=!!Number(e.target.value.split(" ")[1]);t(n,a)},value:o},Object.keys(d).map((function(e){return r.a.createElement(r.a.Fragment,{key:e},r.a.createElement("option",{value:"".concat(e," 1")},d[e]," (Ascending)"),r.a.createElement("option",{value:"".concat(e," 0")},d[e]," (Descending)"))}))))},p=function(e){return fetch("".concat("https://recruitment.hal.skygate.io/incomes/").concat(e)).then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){return e}))},E=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return e.sort((function(e,a){return e[t]>a[t]?n?1:-1:e[t]<a[t]?n?-1:1:0}))},j=function(e){return e.reduce((function(e,t){var n=t.value;return e+Number(n)}),0)},O=function(e){return e.reduce((function(e,t){var n=t.value;return e+Number(n)}),0)/e.length||0},S=function(e){var t=new Date;t.setMonth(t.getMonth()-1),t.setDate(1),t.setHours(0,0,0,0);var n=new Date;return n.setDate(1),n.setHours(0,0,0,0),e.reduce((function(e,a){var r=a.date,c=a.value,o=new Date(r);return t<=o&&n>=o?e+Number(c):e}),0)},w=function(e,t,n){var a=e.map(function(){var e=Object(s.a)(l.a.mark((function e(a,r){var c,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r>=t&&r<n){e.next=2;break}return e.abrupt("return",a);case 2:return c=a.id,e.prev=3,e.next=6,p(c);case 6:o=e.sent,(u=o.incomes)?(a.totalIncome=Number(j(u).toFixed(2)),a.averageIncome=Number(O(u).toFixed(2)),a.lastMonthIncome=Number(S(u).toFixed(2))):(a.totalIncome="No data!",a.averageIncome="No data!",a.lastMonthIncome="No data!"),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),new Error("Something went wrong!");case 14:return e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(t,n){return e.apply(this,arguments)}}());return Promise.all(a).then((function(e){return e}))},N=(n(21),function(){var e=Object(a.useState)([]),t=Object(m.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(m.a)(o,2),d=i[0],f=i[1],p=Object(a.useState)(1),j=Object(m.a)(p,2),O=j[0],S=j[1],N=Object(a.useState)(30),k=Object(m.a)(N,1)[0],I=Object(a.useState)(!1),y=Object(m.a)(I,2),x=y[0],C=y[1],M=Object(a.useState)(!1),P=Object(m.a)(M,2),D=P[0],F=P[1],L=Object(a.useState)(!1),T=Object(m.a)(L,2),A=T[0],B=T[1];Object(a.useEffect)((function(){Object(s.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return C(!0),e.prev=1,e.t0=E,e.next=5,fetch("https://recruitment.hal.skygate.io/companies/").then((function(e){if(e.ok)return e.json()})).then((function(e){return e})).catch((function(e){return e}));case 5:return e.t1=e.sent,t=(0,e.t0)(e.t1,"id",!0),e.next=9,w(t,0,k);case 9:n=e.sent,c(n),f(n),C(!1),B(!0),e.next=20;break;case 16:e.prev=16,e.t2=e.catch(1),F(e.t2),C(!1);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})))()}),[k]),Object(a.useEffect)((function(){A&&(Object(s.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w(n,k,n.length);case 3:t=e.sent,c(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),B(!1))}),[A,n,k]);var H=function(e,t){var n=Object(u.a)(E(d,e,t));f(n),S(1)},J=d.slice((O-1)*k,O*k),K=Math.ceil(d.length/k)||1;return r.a.createElement("div",{className:"main-container"},x?"Loading!":null,!x&&D?"Something went wrong!":null,n||x?null:"No data.",r.a.createElement("div",{className:"userInput-container"},r.a.createElement(b,{handleSearch:function(e){var t=Object(u.a)(function(e,t){return t=t.toLowerCase(),e.filter((function(e){var n=e.id,a=e.name,r=e.city,c=e.totalIncome,o=void 0===c?0:c,u=e.averageIncome,i=void 0===u?0:u,l=e.lastMonthIncome,s=void 0===l?0:l;return n.toString().includes(t)||a.toLowerCase().includes(t)||r.toLowerCase().includes(t)||o.toString().includes(t)||i.toString().includes(t)||s.toString().includes(t)}))}(n,e));f(t),S(1)}}),r.a.createElement(g,{handleSorting:H})),0!==d.length||x?r.a.createElement(v,{data:J,handleSorting:H}):"No data found.",r.a.createElement(h,{handlePageChange:function(e){O+e>K||O+e<1||S(O+e)},currentPage:O,lastPage:K}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[9,1,2]]]);
//# sourceMappingURL=main.1c120064.chunk.js.map